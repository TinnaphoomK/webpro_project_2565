//ระบบจองห้องโดย user จะสามารถดูห้องทั้งหมด และห้องที่ตัวเองจองได้ซึ่งจะบอกสถานะการจอง
//จากการกรอกบบขอจองห้อง : หัวข้อ, รายละเอียด, ห้อง, เวลาเริ่มใช้, เวลาใช้เสร็จ, เอกสารขอใช้ห้อง
//ส่วน admin มีหน้าที่อนุมัตการจอง ซึ่งสามารถดูเอกสารในรูป pdf ถ้าเอกสารไม่ผ่านสามารถ comment ได้ว่าเพราะอะไร
//ในส่วนของการแจ้งความเสียหาย admin สามารถดูแล้วอัพเดตสถานะว่า ซ่อมหรือยัง หรืออยู่ระหว่างการซ่อม

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Room {
  id   Int     @id @default(autoincrement())
  name String?
  detail String?

  Reservation Reservation[]
  Report      Report[]
}

model User {
  id        Int      @id @default(autoincrement())
  username  String?  @unique
  password  String?
  
  createdAt DateTime @default(now())

  Reservation Reservation[]
}

model Reservation {
  id          Int     @id @default(autoincrement())
  title       String?
  detail String?

  user   User? @relation(fields: [userId], references: [id])
  userId Int?

  room   Room? @relation(fields: [roomId], references: [id])
  roomId Int?

  file String?

  status StatusReservation? @default(WAITING)

  startTime DateTime @map("start_time")
  endTime   DateTime @map("end_time")

  comment String?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
}

enum StatusReservation {
  ALLOW
  WAITING
  DISALLOW
}

model Officer {
  id       Int     @id @default(autoincrement())
  username String?
  password String?

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model Report {
  id    Int     @id @default(autoincrement())
  title String?

  room Room? @relation(fields: [roomId], references: [id])

  roomId Int?

  status StatusReport? @default(WAITING)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

enum StatusReport {
  WAITING
  DONE
}
